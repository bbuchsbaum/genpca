<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>genpca Package Test Failure Bug Reports • genpca</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="genpca Package Test Failure Bug Reports"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">genpca</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/genpca-overview.html">genpca: Generalized PCA and Related Decompositions</a></li>
    <li><a class="dropdown-item" href="articles/gplssvd-reference.html">Generalized PLS-SVD: Explicit Whitening Reference</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>genpca Package Test Failure Bug Reports</h1>

    </div>

<div id="genpca-package-test-failure-bug-reports" class="section level1">

<div class="section level2">
<h2 id="report-1-na-eigenvalue-errors-in-prep_constraints-function">Report 1: NA Eigenvalue Errors in prep_constraints Function<a class="anchor" aria-label="anchor" href="#report-1-na-eigenvalue-errors-in-prep_constraints-function"></a></h2>
<div class="section level3">
<h3 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a></h3>
<p>The genpca package is experiencing failures in the <code>prep_constraints</code> function where eigenvalue computations are either failing completely (returning NA) or returning negative eigenvalues for matrices that should be positive semi-definite (PSD). This affects multiple test cases involving sparse constraint matrices.</p>
</div>
<div class="section level3">
<h3 id="root-cause-analysis">Root Cause Analysis<a class="anchor" aria-label="anchor" href="#root-cause-analysis"></a></h3>
<div class="section level4">
<h4 id="primary-issues-identified">Primary Issues Identified:<a class="anchor" aria-label="anchor" href="#primary-issues-identified"></a></h4>
<ol style="list-style-type: decimal"><li><p><strong>RSpectra eigenvalue computation failures</strong>: The <code>prep_constraints</code> function uses <code>RSpectra::eigs_sym(A, k=1, which="SA")</code> to find the smallest eigenvalue. This is failing in several scenarios, particularly with sparse matrices created by the <code>neighborweights</code> package functions.</p></li>
<li>
<p><strong>Non-PSD matrices from external dependencies</strong>: Test cases are creating constraint matrices using <code>neighborweights</code> package functions that are not guaranteed to be positive semi-definite:</p>
<ul><li>
<code>neighborweights:::adjacency.neighbor_graph()</code> creates adjacency matrices</li>
<li>
<code>temporal_adjacency()</code> followed by <code>t(A) %*% A</code> operations</li>
<li>These matrices may have negative eigenvalues or numerical issues</li>
</ul></li>
<li><p><strong>Missing dependency</strong>: The <code>neighborweights</code> package is used extensively in tests but is not listed in DESCRIPTION as a dependency (Suggests or Imports).</p></li>
<li><p><strong>Eigenvalue tolerance issues</strong>: The current tolerance of <code>1e-8</code> may be too strict for numerically challenging sparse matrices.</p></li>
</ol></div>
</div>
<div class="section level3">
<h3 id="specific-failing-tests-analysis">Specific Failing Tests Analysis:<a class="anchor" aria-label="anchor" href="#specific-failing-tests-analysis"></a></h3>
<ol style="list-style-type: decimal"><li>
<strong>test_gpca.R:82</strong> - “gen_pca with sparse column and row constraints works”
<ul><li>M matrix created from <code>neighborweights</code> adjacency graph with <code>diag(M) &lt;- 1.5</code>
</li>
<li>Error: smallest eigenvalue = -0.0283834767954287</li>
</ul></li>
<li>
<strong>test_gpca.R:129</strong> - “can run genpca with sparse weighting matrix”
<ul><li>Large temporal adjacency matrix (10000x10000)</li>
<li>Error: NA (eigenvalue computation failed)</li>
</ul></li>
<li>
<strong>test_gpca.R:144</strong> - “can run genpca on a largeish matrix with deflation”
<ul><li>Temporal adjacency matrix <code>t(A) %*% A</code> for 500x500 matrix</li>
<li>Error: NA (eigenvalue computation failed)</li>
</ul></li>
<li>
<strong>test_gpca.R:243</strong> - “genpca with spatial adjacency recovers a smooth temporal blob”
<ul><li>Sparse adjacency matrix from spatial grid</li>
<li>Error: smallest eigenvalue = -3.75877048314363</li>
</ul></li>
</ol></div>
<div class="section level3">
<h3 id="impact-assessment">Impact Assessment<a class="anchor" aria-label="anchor" href="#impact-assessment"></a></h3>
<p><strong>Severity</strong>: High - Core functionality broken for realistic use cases <strong>Scope</strong>: - Affects users using spatial/temporal constraints - Breaks large-scale applications with sparse constraint matrices - 4 critical test failures in main functionality</p>
</div>
<div class="section level3">
<h3 id="proposed-solutions">Proposed Solutions<a class="anchor" aria-label="anchor" href="#proposed-solutions"></a></h3>
<ol style="list-style-type: decimal"><li>
<strong>Improve eigenvalue computation robustness</strong>
<ul><li>Add better fallback strategies when RSpectra fails</li>
<li>Implement more robust matrix conditioning checks</li>
<li>Use multiple eigenvalue computation methods</li>
</ul></li>
<li>
<strong>Add matrix remediation options</strong>
<ul><li>Implement regularization for near-singular matrices</li>
<li>Add automatic matrix conditioning (e.g., ridge penalty)</li>
<li>Provide better error messages with suggested fixes</li>
</ul></li>
<li>
<strong>Fix dependency issues</strong>
<ul><li>Add <code>neighborweights</code> to Suggests in DESCRIPTION</li>
<li>Or replace with internal functions for test matrix generation</li>
</ul></li>
</ol><hr></div>
</div>
<div class="section level2">
<h2 id="report-2-dsymatrix-c-compatibility-error-in-gmd_fast_cpp">Report 2: dsyMatrix C++ Compatibility Error in gmd_fast_cpp<a class="anchor" aria-label="anchor" href="#report-2-dsymatrix-c-compatibility-error-in-gmd_fast_cpp"></a></h2>
<div class="section level3">
<h3 id="summary-1">Summary<a class="anchor" aria-label="anchor" href="#summary-1"></a></h3>
<p>The <code>gmd_fast_cpp</code> function in the genpca package fails when passed dense symmetric matrices (dsyMatrix objects) from R’s Matrix package, throwing the error “dsyMatrix is not supported”. This error occurs during the automatic type conversion from R to C++ through RcppArmadillo.</p>
</div>
<div class="section level3">
<h3 id="technical-root-cause">Technical Root Cause<a class="anchor" aria-label="anchor" href="#technical-root-cause"></a></h3>
<p>The issue stems from incompatible matrix type handling between R’s Matrix package and RcppArmadillo’s automatic type conversion system:</p>
<ol style="list-style-type: decimal"><li><p><strong>Matrix Type Creation</strong>: When <code><a href="https://rdrr.io/pkg/Matrix/man/Matrix.html" class="external-link">Matrix::Matrix()</a></code> is called on a dense, symmetric, positive-definite matrix, it automatically creates a <code>dsyMatrix</code> object - a specialized class for dense symmetric matrices.</p></li>
<li>
<p><strong>C++ Function Signature</strong>: The <code>gmd_fast_cpp</code> function expects <code>arma::sp_mat</code> (sparse matrix) types for the Q and R constraint matrices:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>List gmd_fast_cpp<span class="op">(</span><span class="at">const</span> arma<span class="op">::</span>mat<span class="op">&amp;</span> X<span class="op">,</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>                  <span class="at">const</span> arma<span class="op">::</span>sp_mat<span class="op">&amp;</span> Q<span class="op">,</span>    <span class="co">// &lt;-- expects sparse matrix</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>                  <span class="at">const</span> arma<span class="op">::</span>sp_mat<span class="op">&amp;</span> R<span class="op">,</span>    <span class="co">// &lt;-- expects sparse matrix</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>                  <span class="dt">int</span> k<span class="op">,</span> <span class="op">...)</span></span></code></pre></div>
</li>
<li><p><strong>Conversion Failure</strong>: RcppArmadillo’s automatic conversion system cannot convert a <code>dsyMatrix</code> object to <code>arma::sp_mat</code>, resulting in the “dsyMatrix is not supported” error.</p></li>
</ol></div>
<div class="section level3">
<h3 id="failing-tests">Failing Tests<a class="anchor" aria-label="anchor" href="#failing-tests"></a></h3>
<ol style="list-style-type: decimal"><li>
<strong>test_gpca.R:309</strong> - “gmd_fast_cpp matches genpca (use_cpp=TRUE) for p &lt;= n, dense constraints”</li>
<li>
<strong>test_gpca.R:329</strong> - “gmd_fast_cpp matches genpca (use_cpp=TRUE) for p &gt; n, dense constraints”</li>
</ol></div>
<div class="section level3">
<h3 id="impact-assessment-1">Impact Assessment<a class="anchor" aria-label="anchor" href="#impact-assessment-1"></a></h3>
<p><strong>Severity</strong>: High - Core C++ functionality is completely broken for dense constraint matrices - Multiple critical tests are failing - Users cannot use the fast C++/Spectra implementation with dense constraints</p>
</div>
<div class="section level3">
<h3 id="proposed-solution">Proposed Solution<a class="anchor" aria-label="anchor" href="#proposed-solution"></a></h3>
<p>Modify the C++ function to accept <code>SEXP</code> parameters and handle type conversion explicitly:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co">// In gmd_fast.cpp</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>List gmd_fast_cpp<span class="op">(</span><span class="at">const</span> arma<span class="op">::</span>mat<span class="op">&amp;</span> X<span class="op">,</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>                  SEXP Q_sexp<span class="op">,</span>          <span class="co">// Accept raw SEXP</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>                  SEXP R_sexp<span class="op">,</span>          <span class="co">// Accept raw SEXP  </span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>                  <span class="dt">int</span> k<span class="op">,</span> <span class="dt">double</span> tol <span class="op">=</span> <span class="fl">1e-9</span><span class="op">,</span> <span class="dt">int</span> maxit <span class="op">=</span> <span class="dv">1000</span><span class="op">,</span> <span class="dt">int</span> seed <span class="op">=</span> <span class="dv">1234</span><span class="op">)</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>    <span class="co">// Convert Q to sparse matrix with proper type handling</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>    arma<span class="op">::</span>sp_mat Q<span class="op">;</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>Rf_inherits<span class="op">(</span>Q_sexp<span class="op">,</span> <span class="st">"dsyMatrix"</span><span class="op">)</span> <span class="op">||</span> Rf_inherits<span class="op">(</span>Q_sexp<span class="op">,</span> <span class="st">"dgeMatrix"</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>        <span class="co">// Convert dense Matrix to sparse</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>        arma<span class="op">::</span>mat Q_dense <span class="op">=</span> Rcpp<span class="op">::</span>as<span class="op">&lt;</span>arma<span class="op">::</span>mat<span class="op">&gt;(</span>Q_sexp<span class="op">);</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>        Q <span class="op">=</span> arma<span class="op">::</span>sp_mat<span class="op">(</span>Q_dense<span class="op">);</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>        Q <span class="op">=</span> Rcpp<span class="op">::</span>as<span class="op">&lt;</span>arma<span class="op">::</span>sp_mat<span class="op">&gt;(</span>Q_sexp<span class="op">);</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a>    </span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a>    <span class="co">// Similar handling for R</span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a>    <span class="co">// ... rest of function</span></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr></div>
</div>
<div class="section level2">
<h2 id="report-3-numerical-precision-issues-in-genpca-package-tests">Report 3: Numerical Precision Issues in genpca Package Tests<a class="anchor" aria-label="anchor" href="#report-3-numerical-precision-issues-in-genpca-package-tests"></a></h2>
<div class="section level3">
<h3 id="summary-2">Summary<a class="anchor" aria-label="anchor" href="#summary-2"></a></h3>
<p>Multiple test failures in the genpca R package are occurring due to numerical precision and algorithmic issues across several core functions. The failures span matrix decomposition algorithms, generalized eigenvalue solvers, sparse functional PCA, and subspace comparison utilities.</p>
</div>
<div class="section level3">
<h3 id="root-cause-analysis-1">Root Cause Analysis<a class="anchor" aria-label="anchor" href="#root-cause-analysis-1"></a></h3>
<div class="section level4">
<h4 id="id_1-generalized-eigenvalue-problem-solver-solve_gep_subspace">1. Generalized Eigenvalue Problem Solver (<code>solve_gep_subspace</code>)<a class="anchor" aria-label="anchor" href="#id_1-generalized-eigenvalue-problem-solver-solve_gep_subspace"></a></h4>
<p><strong>Issue:</strong> The Gram matrix orthogonality check is failing with large deviations from expected identity matrices.</p>
<p><strong>Technical cause:</strong> - The subspace iteration algorithm is not maintaining proper orthogonality in the S2-inner product - The orthonormalization step uses standard QR decomposition but should use the generalized inner product - Regularization parameters may be inadequate for ill-conditioned matrices</p>
<p><strong>Evidence:</strong></p>
<pre><code>gram matrix expected: diag(3) = [1,0,0; 0,1,0; 0,0,1]
gram matrix actual: [0.375, *, 3.496; *, 0.581, *; *, *, *]</code></pre>
</div>
<div class="section level4">
<h4 id="id_2-sparse-functional-pca-sfpca">2. Sparse Functional PCA (<code>sfpca</code>)<a class="anchor" aria-label="anchor" href="#id_2-sparse-functional-pca-sfpca"></a></h4>
<p><strong>Issue:</strong> Rank-1 matrix recovery is severely inaccurate with large magnitude errors.</p>
<p><strong>Technical cause:</strong> - The alternating optimization algorithm is not converging to the true rank-1 decomposition - Regularization penalties are insufficient for the test case - Sign ambiguity handling is inadequate</p>
<p><strong>Evidence:</strong></p>
<pre><code>Expected singular value: 17.4
Actual singular value: 1.3
Error magnitude: 92.5% relative error</code></pre>
</div>
<div class="section level4">
<h4 id="id_3-c-vs-r-implementation-mismatches-gmd_fast_cpp">3. C++ vs R Implementation Mismatches (<code>gmd_fast_cpp</code>)<a class="anchor" aria-label="anchor" href="#id_3-c-vs-r-implementation-mismatches-gmd_fast_cpp"></a></h4>
<p><strong>Issue:</strong> Subspace correlation matrices between C++ and R implementations are not close to permutation matrices.</p>
<p><strong>Technical cause:</strong> - Different numerical precision or algorithmic paths between C++ and R implementations - Possible differences in eigenvalue/singular value solver convergence criteria - Sign convention inconsistencies between implementations</p>
</div>
</div>
<div class="section level3">
<h3 id="common-patterns-across-failures">Common Patterns Across Failures:<a class="anchor" aria-label="anchor" href="#common-patterns-across-failures"></a></h3>
<ol style="list-style-type: decimal"><li>
<strong>Orthogonality Loss:</strong> Multiple algorithms fail to maintain proper orthogonality constraints</li>
<li>
<strong>Regularization Inadequacy:</strong> Default regularization parameters appear insufficient for test matrices</li>
<li>
<strong>Sign Ambiguity:</strong> Inconsistent handling of sign indeterminacy in matrix decompositions</li>
<li>
<strong>Tolerance Mismatches:</strong> Test tolerances don’t match the actual numerical precision of algorithms</li>
<li>
<strong>Implementation Divergence:</strong> C++ and R implementations produce different results for identical inputs</li>
</ol></div>
<div class="section level3">
<h3 id="proposed-solutions-1">Proposed Solutions<a class="anchor" aria-label="anchor" href="#proposed-solutions-1"></a></h3>
<ol style="list-style-type: decimal"><li>
<strong>Fix Generalized Orthogonalization</strong> (Critical)
<ul><li>Implement proper generalized Gram-Schmidt orthogonalization in <code>solve_gep_subspace</code>
</li>
<li>Replace standard QR with S2-orthogonal QR decomposition</li>
</ul></li>
<li>
<strong>Improve Regularization Strategy</strong> (High)
<ul><li>Implement adaptive regularization based on matrix condition numbers</li>
<li>Add condition number monitoring and warnings</li>
<li>Increase default regularization parameters</li>
</ul></li>
<li>
<strong>Enhance SFPCA Algorithm</strong> (High)
<ul><li>Review convergence criteria in the alternating optimization</li>
<li>Implement better initialization strategies</li>
<li>Improve penalty parameter estimation heuristics</li>
</ul></li>
<li>
<strong>Standardize Implementations</strong> (Medium)
<ul><li>Ensure C++ and R implementations use identical algorithms and tolerances</li>
<li>Add comprehensive cross-validation tests between implementations</li>
<li>Standardize sign conventions across all matrix decomposition functions</li>
</ul></li>
</ol><hr></div>
</div>
<div class="section level2">
<h2 id="report-4-rpls-and-transfer-method-issues">Report 4: RPLS and Transfer Method Issues<a class="anchor" aria-label="anchor" href="#report-4-rpls-and-transfer-method-issues"></a></h2>
<div class="section level3">
<h3 id="summary-3">Summary<a class="anchor" aria-label="anchor" href="#summary-3"></a></h3>
<p>The genpca R package is experiencing several critical test failures related to missing imports, method dispatch issues, and dimension mismatches in the rpls (regularized partial least squares) and transfer method implementations.</p>
</div>
<div class="section level3">
<h3 id="root-cause-analysis-2">Root Cause Analysis<a class="anchor" aria-label="anchor" href="#root-cause-analysis-2"></a></h3>
<div class="section level4">
<h4 id="id_1-missing-function-imports-primary-issue">1. Missing Function Imports (Primary Issue)<a class="anchor" aria-label="anchor" href="#id_1-missing-function-imports-primary-issue"></a></h4>
<p><strong>Problem</strong>: The package does not import essential functions from <code>multivarious</code>: - <code>project</code> function is not imported, causing <code>Error: could not find function "project"</code> - <code>partial_project</code> function is not imported, causing <code>Error: object 'partial_project' not found</code></p>
<p><strong>Evidence</strong>: <code>/Users/bbuchsbaum/code/genpca/NAMESPACE</code> only imports limited functions from multivarious</p>
</div>
<div class="section level4">
<h4 id="id_2-method-dispatch-and-gets3method-issue">2. Method Dispatch and getS3method Issue<a class="anchor" aria-label="anchor" href="#id_2-method-dispatch-and-gets3method-issue"></a></h4>
<p><strong>Problem</strong>: <code>/Users/bbuchsbaum/code/genpca/R/transfer_wrappers.R</code> line 43 uses <code><a href="https://rdrr.io/r/utils/getS3method.html" class="external-link">getS3method()</a></code> without importing it from the <code>utils</code> package.</p>
</div>
<div class="section level4">
<h4 id="id_3-s3-method-signature-inconsistency">3. S3 Method Signature Inconsistency<a class="anchor" aria-label="anchor" href="#id_3-s3-method-signature-inconsistency"></a></h4>
<p><strong>Problem</strong>: The <code>transfer.cross_projector</code> method has parameter name mismatches with the base <code>multivarious</code> implementation.</p>
</div>
</div>
<div class="section level3">
<h3 id="failing-tests-1">Failing Tests<a class="anchor" aria-label="anchor" href="#failing-tests-1"></a></h3>
<ol style="list-style-type: decimal"><li>
<strong>test_rpls.R:176</strong> - “rpls partial projection works if partial cols are requested” - Dimension mismatch</li>
<li>
<strong>test_gpca.R:29</strong> - “gen_pca with column variances is equivalent to a scaled pca” - Attributes length mismatch</li>
<li>Package check warnings about S3 method consistency</li>
<li>Note about undefined global function ‘getS3method’</li>
</ol></div>
<div class="section level3">
<h3 id="impact-assessment-2">Impact Assessment<a class="anchor" aria-label="anchor" href="#impact-assessment-2"></a></h3>
<p><strong>Severity</strong>: HIGH - Multiple core functionality tests failing - Package fails basic R CMD check requirements - Method dispatch broken for transfer operations</p>
</div>
<div class="section level3">
<h3 id="proposed-solutions-2">Proposed Solutions<a class="anchor" aria-label="anchor" href="#proposed-solutions-2"></a></h3>
<div class="section level4">
<h4 id="id_1-fix-namespace-imports-critical---priority-1">1. Fix NAMESPACE Imports (Critical - Priority 1)<a class="anchor" aria-label="anchor" href="#id_1-fix-namespace-imports-critical---priority-1"></a></h4>
<p>Add missing imports to <code>/Users/bbuchsbaum/code/genpca/NAMESPACE</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">importFrom</span><span class="op">(</span><span class="va">multivarious</span>,<span class="va">project</span><span class="op">)</span></span>
<span><span class="fu">importFrom</span><span class="op">(</span><span class="va">multivarious</span>,<span class="va">partial_project</span><span class="op">)</span></span>
<span><span class="fu">importFrom</span><span class="op">(</span><span class="va">utils</span>,<span class="va">getS3method</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="id_2-fix-transfer_wrappersr-method-critical---priority-1">2. Fix transfer_wrappers.R Method (Critical - Priority 1)<a class="anchor" aria-label="anchor" href="#id_2-fix-transfer_wrappersr-method-critical---priority-1"></a></h4>
<p>Add to <code>/Users/bbuchsbaum/code/genpca/R/transfer_wrappers.R</code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @importFrom utils getS3method</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="id_3-standardize-parameter-names-medium---priority-2">3. Standardize Parameter Names (Medium - Priority 2)<a class="anchor" aria-label="anchor" href="#id_3-standardize-parameter-names-medium---priority-2"></a></h4>
<p>Ensure parameter signature consistency in transfer methods.</p>
<hr></div>
</div>
</div>
<div class="section level2">
<h2 id="summary-statistics">Summary Statistics<a class="anchor" aria-label="anchor" href="#summary-statistics"></a></h2>
<ul><li>
<strong>Total Test Failures</strong>: 34</li>
<li>
<strong>Categories</strong>: 4 major issue categories</li>
<li>
<strong>Severity</strong>: All HIGH severity</li>
<li>
<strong>Primary Causes</strong>:
<ul><li>Missing imports and dependencies</li>
<li>Matrix type compatibility issues</li>
<li>Numerical precision problems</li>
<li>Algorithm implementation differences</li>
</ul></li>
</ul></div>
<div class="section level2">
<h2 id="recommended-action-plan">Recommended Action Plan<a class="anchor" aria-label="anchor" href="#recommended-action-plan"></a></h2>
<ol style="list-style-type: decimal"><li>
<strong>Immediate</strong> (Day 1):
<ul><li>Fix NAMESPACE imports</li>
<li>Add missing dependencies to DESCRIPTION</li>
<li>Fix getS3method import</li>
</ul></li>
<li>
<strong>Short-term</strong> (Week 1):
<ul><li>Fix dsyMatrix C++ compatibility</li>
<li>Improve eigenvalue computation robustness</li>
<li>Fix generalized orthogonalization</li>
</ul></li>
<li>
<strong>Medium-term</strong> (Week 2-3):
<ul><li>Standardize C++/R implementations</li>
<li>Improve SFPCA convergence</li>
<li>Update test tolerances</li>
</ul></li>
<li>
<strong>Long-term</strong> (Month 1):
<ul><li>Add comprehensive numerical diagnostics</li>
<li>Improve documentation</li>
<li>Add user guidance for edge cases</li>
</ul></li>
</ol></div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Brad Buchsbaum.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

